<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>سبد خرید - مزون کیمیا</title>
<style>
body{font-family:Tahoma,sans-serif;background:#f6f7fb;margin:0;padding:20px}
.container{max-width:900px;margin:auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
h2{text-align:center;color:#d63384;margin-bottom:20px}
.cart-item{display:flex;gap:12px;border-bottom:1px solid #eee;padding:10px 0;align-items:center}
.cart-item img{width:80px;height:80px;object-fit:cover;border-radius:8px}
.info{flex:1;display:flex;flex-direction:column;gap:4px}
button{background:#d63384;color:white;padding:6px 10px;border:none;border-radius:6px;cursor:pointer}
.total{text-align:right;font-weight:700;margin-top:10px;font-size:16px}
.checkout{margin-top:15px;text-align:center}
</style>
</head>
<body>
<div class="container">
<h2>سبد خرید</h2>
<div id="cartItems"></div>
<div class="total" id="total"></div>
<div class="checkout"><button onclick="location.href='checkout.html'">ادامه فرآیند خرید</button></div>
</div>

<script>
const CART_KEY='mezoun_kimia_cart';
function loadCart(){return JSON.parse(localStorage.getItem(CART_KEY)||'[]')}
function saveCart(c){localStorage.setItem(CART_KEY,JSON.stringify(c))}

function renderCart(){
  const cart=loadCart();
  const container=document.getElementById('cartItems');
  const totalEl=document.getElementById('total');
  container.innerHTML='';
  if(!cart.length){container.innerHTML='سبد خرید خالی است';totalEl.textContent='';return;}
  let total=0;
  cart.forEach((item,i)=>{
    const div=document.createElement('div'); div.className='cart-item';
    const img=document.createElement('img'); img.src=item.images[0]||''; div.appendChild(img);
    const info=document.createElement('div'); info.className='info';
    info.innerHTML=`<div>${item.title}</div><div>رنگ: ${item.color}</div><div>تعداد: ${item.qty}</div><div>قیمت: ${item.price} تومان</div>`;
    div.appendChild(info);
    const del=document.createElement('button'); del.textContent='حذف'; del.onclick=()=>{
      cart.splice(i,1); saveCart(cart); renderCart();
    }
    div.appendChild(del);
    container.appendChild(div);
    total+=item.price*item.qty;
  });
  totalEl.textContent='جمع کل: '+total+' تومان';
}

renderCart();
</script>
</body>
</html>
