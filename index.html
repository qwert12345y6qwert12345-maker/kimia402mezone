<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ø²ÙˆÙ† Ú©ÛŒÙ…ÛŒØ§</title>
  <style>
    body { font-family: sans-serif; direction: rtl; margin: 20px; background:#fafafa; }
    h1 { text-align:center; }
    #ads { display: grid; grid-template-columns: repeat(auto-fill,minmax(200px,1fr)); gap: 15px; margin-top:20px; }
    .ad { border:1px solid #ddd; padding:10px; border-radius:10px; background:#fff; }
    .hidden { display: none; }
    button { margin-top:10px; padding:6px 12px; }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
</head>
<body>
  <h1>Ù…Ø²ÙˆÙ† Ú©ÛŒÙ…ÛŒØ§</h1>

  <div id="adminLogin">
    <input type="password" id="adminPass" placeholder="Ø±Ù…Ø² Ù…Ø¯ÛŒØ±">
    <button onclick="login()">ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±</button>
  </div>

  <div id="adminPanel" class="hidden">
    <h3>Ø§ÙØ²ÙˆØ¯Ù† Ø¢Ú¯Ù‡ÛŒ Ø¬Ø¯ÛŒØ¯</h3>
    <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù†"><br>
    <textarea id="desc" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª"></textarea><br>
    <input type="text" id="price" placeholder="Ù‚ÛŒÙ…Øª"><br>
    <button onclick="addAd()">Ø°Ø®ÛŒØ±Ù‡ Ø¢Ú¯Ù‡ÛŒ</button>
  </div>

  <h2>ğŸ›ï¸ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§</h2>
  <div id="ads"></div>

  <script>
    // ğŸ”¹ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Firebase
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Ø´Ø±ÙˆØ¹
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const adsDiv = document.getElementById("ads");
    const adminPanel = document.getElementById("adminPanel");

    // Ø±Ù…Ø² ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±
    function login(){
      let pass = document.getElementById("adminPass").value;
      if(pass === "kimia123"){
        adminPanel.classList.remove("hidden");
      } else {
        alert("Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!");
      }
    }

    // Ø§ÙØ²ÙˆØ¯Ù† Ø¢Ú¯Ù‡ÛŒ
    async function addAd(){
      let title = document.getElementById("title").value;
      let desc = document.getElementById("desc").value;
      let price = document.getElementById("price").value;

      if(!title || !desc || !price){
        alert("Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯!");
        return;
      }

      await db.collection("ads").add({
        title, desc, price,
        date: new Date().toISOString()
      });

      alert("âœ… Ø¢Ú¯Ù‡ÛŒ Ø«Ø¨Øª Ø´Ø¯!");
      document.getElementById("title").value="";
      document.getElementById("desc").value="";
      document.getElementById("price").value="";
    }

    // Ù†Ù…Ø§ÛŒØ´ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø²Ù†Ø¯Ù‡
    db.collection("ads").orderBy("date","desc").onSnapshot(snapshot=>{
      adsDiv.innerHTML = "";
      snapshot.forEach(doc=>{
        let ad = doc.data();
        adsDiv.innerHTML += `
          <div class="ad">
            <h4>${ad.title}</h4>
            <p>${ad.desc}</p>
            <p>ğŸ’µ ${ad.price} ØªÙˆÙ…Ø§Ù†</p>
          </div>
        `;
      });
    });
  </script>
</body>
</html>
